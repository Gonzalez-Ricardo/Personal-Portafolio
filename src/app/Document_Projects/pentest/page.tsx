import { StarsBackground } from "@/components/ui/stars-background";
import Header from "@/components/component/header";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import Image from "next/image";
import Image1 from "../../../../public/Images/1.png";
import Image2 from "../../../../public/Images/2.png";
import Image3 from "../../../../public/Images/3.png";
import Image4 from "../../../../public/Images/4.png";
import Image5 from "../../../../public/Images/5.png";
import Image6 from "../../../../public/Images/6.png";
import Image7 from "../../../../public/Images/7.png";
import Image8 from "../../../../public/Images/8.png";
import Image9 from "../../../../public/Images/9.png";
import Image10 from "../../../../public/Images/10.png";
import {
  Code,
  Shield,
  AlertTriangle,
  Lock,
  Telescope,
  Eye,
} from "lucide-react";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

const images = [
  "/Images/1.png",
  "/Images/2.png",
  "/Images/3.png",
  "/Images/4.png",
  "/Images/5.png",
  "/Images/6.png",
  "/Images/7.png",
  "/Images/8.png",
  "/Images/9.png",
  "/Images/10.png",
];

const project = [
  {
    title: "Evidence from vsFTPd 2.3.4 pentest",
    images,
    description: [
      "Screenshots and captures generated during the lab (nmap, msfconsole, linpeas).",
    ],
  },
];

export default function PentestDocPage() {
  // If you only want the first entry:
  const p = project[0];

  return (
    <div>
      <StarsBackground className="fixed top-0 left-0 w-full h-full z-0" />
      <Header />
      <div className="container mx-auto px-6 py-8">
        <Card className="py-2 bg-[rgba(17,25,40,0.5)]  border border-[#465866]">
          <CardHeader>
            <CardTitle className="text-white">INTRODUCTION</CardTitle>
          </CardHeader>
          <CardContent>
            <CardDescription className="text-gray-400">
              This lab consists of exploiting the vulnerable vsFTPd 2.3.4
              backdoor (CVE-2011-2523) on a Metasploitable machine, using Kali
              Linux as the attacker and Metasploit Framework as the main tool.
              The objective is to document the full cycle: reconnaissance,
              exploitation, post-exploitation and remediation recommendations.
            </CardDescription>
          </CardContent>
        </Card>
      </div>

      <section id="methodology" className="mb-12 container mx-auto px-6 py-8 ">
        <Card className="py-2 bg-[rgba(17,25,40,0.5)]  border border-[#465866]">
          <CardHeader>
            <CardTitle className="text-2xl text-primary mb-2 text-white">
              Methodology and Cybersecurity Procedures
            </CardTitle>
            <p className="text-muted-foreground text-gray-400">
              This project consisted of a controlled pentest in a lab environment
              using Kali Linux as the attacker and Metasploitable 2 as the
              target. Through reconnaissance with Nmap, the vulnerable service
              vsFTPd 2.3.4 (CVE-2011-2523) was identified. Later, using
              Metasploit Framework, the service backdoor was exploited to obtain
              remote access with root privileges on the target machine.
            </p>
          </CardHeader>

          <CardContent className="space-y-8">
            {/* Workflow Overview */}
            <div>
              <h4 className="font-semibold mb-4 text-lg text-white">
                THE PRACTICE INCLUDED
              </h4>

              <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div className="text-center p-4 bg-muted rounded-lg">
                  <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3">
                    <Shield className="w-6 h-6 text-white" />
                  </div>
                  <h5 className="font-medium mb-2 text-white">Reconnaissance</h5>
                  <p className="text-sm text-muted-foreground text-gray-400">
                    Asset identification and attack surface mapping. Scanning and
                    enumeration (Nmap, services, versions).
                  </p>
                </div>

                <div className="text-center p-4 bg-muted rounded-lg">
                  <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3">
                    <AlertTriangle className="w-6 h-6 text-white" />
                  </div>
                  <h5 className="font-medium mb-2 text-white">Assessment</h5>
                  <p className="text-sm text-muted-foreground text-gray-400">
                    Vulnerability and risk analysis. Verification with scripts
                    and configuration checks (NSE, Nikto, enum4linux).
                  </p>
                </div>

                <div className="text-center p-4 bg-muted rounded-lg">
                  <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3">
                    <Code className="w-6 h-6 text-white" />
                  </div>
                  <h5 className="font-medium mb-2 text-white">Exploitation</h5>
                  <p className="text-sm text-muted-foreground text-gray-400">
                    Controlled penetration tests. Use of Metasploit to exploit
                    (vsFTPd 2.3.4) and manage sessions.
                  </p>
                </div>

                <div className="text-center p-4 bg-muted rounded-lg">
                  <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3">
                    <Lock className="w-6 h-6 text-white" />
                  </div>
                  <h5 className="font-medium mb-2 text-white">Mitigation</h5>
                  <p className="text-sm text-muted-foreground text-gray-400">
                    Practical recommendations: patching, disabling vulnerable
                    services, hardening, and monitoring measures.
                  </p>
                </div>
              </div>
            </div>

            <Separator />

            <div>
              <h4 className="font-semibold mb-4 text-lg text-white">
                Lab Pentest: vsFTPd 2.3.4 Exploitation
              </h4>
              <div className="space-y-6">
                {/* Phase 1 */}
                <div className="border-l-4 border-primary pl-6">
                  <h5 className="font-semibold text-primary mb-2 text-white">
                    Phase 1: Reconnaissance
                  </h5>
                  <ul className="space-y-2 text-muted-foreground text-gray-400">
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>- Tools: </span>
                      <code className="ml-2">nmap -sV -O</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>- Result: </span>
                      <strong className="ml-2">21/tcp open — vsFTPd 2.3.4</strong>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>- File:</span>
                      <code className="ml-2">01_nmap_initial.txt</code>
                    </li>
                  </ul>
                </div>

                {/* Phase 2 */}
                <div className="border-l-4 border-accent pl-6">
                  <h5 className="font-semibold text-accent mb-2 text-white">
                    Phase 2: Enumeration
                  </h5>
                  <ul className="space-y-2 text-muted-foreground text-gray-400">
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>- FTP:</span>
                      <code className="ml-2">login anonymous, ls -a (empty)</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>- Backdoor check:</span>
                      <code className="ml-2">nmap --script ftp-vsftpd-backdoor -p21</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>- File:</span>
                      <code className="ml-2">02_nmap_vsftpd_backdoor.txt</code>
                    </li>
                  </ul>
                </div>

                {/* Phase 3 */}
                <div className="border-l-4 border-primary pl-6">
                  <h5 className="font-semibold text-primary mb-2 text-white">
                    Phase 3: Exploitation
                  </h5>
                  <ul className="space-y-2 text-muted-foreground text-gray-400">
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>Tool:</span>
                      <strong className="ml-2">Metasploit</strong>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>Module:</span>
                      <code className="ml-2">exploit/unix/ftp/vsftpd_234_backdoor</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>Commands:</span>
                      <code className="ml-2">use ...; set RHOSTS 192.168.20.131; set RPORT 21; run</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>Result:</span>
                      <strong className="ml-2">Command shell session opened, UID: uid=0(root)</strong>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                      <span>Evidence:</span>
                      <code className="ml-2">msfconsole_found_shell.png</code>
                    </li>
                  </ul>
                </div>

                {/* Phase 4 */}
                <div className="border-l-4 border-accent pl-6">
                  <h5 className="font-semibold text-accent mb-2 text-white">
                    Phase 4: Post-exploitation
                  </h5>
                  <ul className="space-y-2 text-muted-foreground text-gray-400">
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>Commands:</span>
                      <code className="ml-2">whoami; id; uname -a; find / -perm -4000</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>LinPEAS:</span>
                      <code className="ml-2">/tmp/linpeas.out</code>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>Files:</span>
                      <code className="ml-2">suid_bins.txt, cleartext_creds.txt, linpeas.out</code>
                    </li>
                  </ul>
                </div>

                {/* Phase 5 */}
                <div className="border-l-4 border-accent pl-6">
                  <h5 className="font-semibold text-accent mb-2 text-white">
                    Phase 5: Remediation
                  </h5>
                  <ul className="space-y-2 text-muted-foreground text-gray-400">
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>Recommendations:</span>
                      <span className="ml-2">Remove vsFTPd 2.3.4, disable anonymous FTP, migrate to SFTP, apply patches.</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <div className="w-1.5 h-1.5 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                      <span>Verification:</span>
                      <code className="ml-2">nmap -sV 192.168.20.131 (post-remediation)</code>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <Separator />

            {/* Tools and Technologies */}
            <div className="text-gray-400">
              <h4 className="font-semibold mb-4 text-lg text-white">
                Security Tools & Frameworks
              </h4>

              <div className="grid md:grid-cols-3 gap-6">
                <div>
                  <h5 className="font-medium mb-3 flex items-center gap-2 text-white">
                    <Eye className="w-4 h-4" />
                    Reconnaissance
                  </h5>
                  <div className="space-y-2">
                    <Badge className="text-gray-400" variant="outline">Nmap</Badge>
                    <Badge className="text-gray-400" variant="outline">FTP Client</Badge>
                    <Badge className="text-gray-400" variant="outline">Ping</Badge>
                    <Badge className="text-gray-400" variant="outline">Ifconfig / Ip addr</Badge>
                  </div>
                </div>

                <div>
                  <h5 className="font-medium mb-3 flex items-center gap-2 text-white">
                    <Shield className="w-4 h-4" />
                    Assessment
                  </h5>
                  <div className="space-y-2">
                    <Badge className="text-gray-400" variant="outline">Nmap (NSE Scripts)</Badge>
                    <Badge className="text-gray-400" variant="outline">Netstat</Badge>
                    <Badge className="text-gray-400" variant="outline">Whoami / Id / Uname -a</Badge>
                  </div>
                </div>

                <div>
                  <h5 className="font-medium mb-3 flex items-center gap-2 text-white">
                    <Code className="w-4 h-4" />
                    Pentesting
                  </h5>
                  <div className="space-y-2">
                    <Badge className="text-gray-400" variant="outline">Metasploit Framework</Badge>
                    <Badge className="text-gray-400" variant="outline">Kali Linux</Badge>
                    <Badge className="text-gray-400" variant="outline">Netcat</Badge>
                    <Badge className="text-gray-400" variant="outline">Python</Badge>
                    <Badge className="text-gray-400" variant="outline">LinPEAS</Badge>
                  </div>
                </div>

                <div>
                  <h5 className="font-medium mb-3 flex items-center gap-2 text-white">
                    <AlertTriangle className="w-4 h-4" />
                    Monitoring
                  </h5>
                  <div className="space-y-2">
                    <Badge className="text-gray-400" variant="outline">Manual configuration review</Badge>
                    <Badge className="text-gray-400" variant="outline">Nmap (post-exploit verification)</Badge>
                    <Badge className="text-gray-400" variant="outline">System logs</Badge>
                  </div>
                </div>

                <div>
                  <h5 className="font-medium mb-3 flex items-center gap-2 text-white">
                    <Telescope className="w-4 h-4" />
                    Complementary
                  </h5>
                  <div className="space-y-2">
                    <Badge className="text-gray-400" variant="outline">OpenVAS</Badge>
                    <Badge className="text-gray-400" variant="outline">Nessus · Burp Suite</Badge>
                    <Badge className="text-gray-400" variant="outline">OSSEC</Badge>
                    <Badge className="text-gray-400" variant="outline">ELK Stack</Badge>
                  </div>
                </div>
              </div>
            </div>

            {/* Quality Assurance */}
            <div>
              <h4 className="font-semibold mb-4 text-lg text-white">Standards & Compliance</h4>
              <p className="context text-gray-400">
                Controlled pentest in an internal lab: Kali (attacker) vs Metasploitable 2 (target). Focus: identification and exploitation of <strong>vsFTPd 2.3.4</strong> (CVE-2011-2523) and remediation verification.
              </p>

              <div className="bg-muted p-6 rounded-lg">
                <div className="grid md:grid-cols-2 gap-6">
                  <div>
                    <h5 className="font-medium mb-3 text-white">Applied Frameworks</h5>
                    <ul className="space-y-1 text-sm text-muted-foreground text-gray-400">
                      <li>• <strong>PTES</strong> - phased execution (reconnaissance, exploitation, post-exploitation).</li>
                      <li>• <strong>OWASP Testing Guide</strong> - service exposure checks and NSE scripts.</li>
                      <li>• <strong>NIST SP 800-115</strong> - guidelines for planning and evidence of technical tests.</li>
                      <li>• <strong>CIS Controls v8</strong> - CIS 12 (network infrastructure management) and CIS 7 (vulnerability management).</li>
                    </ul>
                  </div>

                  <div>
                    <h5 className="font-medium mb-3 text-white">Project Metrics</h5>
                    <ul className="space-y-1 text-sm text-muted-foreground text-gray-400">
                      <li>• <strong>Detection:</strong> <code>21/tcp open ftp</code> with Nmap → vsFTPd 2.3.4.</li>
                      <li>• <strong>Exploitation:</strong> remote shell with <code>root</code> privileges via Metasploit (<code>unix/ftp/vsftpd_234_backdoor</code>).</li>
                      <li>• <strong>Evidence:</strong> messages <code>Found shell</code> and <code>UID=0(root)</code> + <code>whoami</code>, <code>id</code>.</li>
                      <li>• <strong>Proposed remediation:</strong> remove/update vsFTPd 2.3.4 and/or close <code>21/tcp</code>; migrate to SFTP.</li>
                      <li>• <strong>Verification:</strong> re-scan with Nmap post-remediation to confirm port 21 is closed or the service is secured.</li>
                      <li>• <strong>Cycle time:</strong> Reconnaissance → Exploitation → Verification completed within the same lab session.</li>
                    </ul>
                  </div>

                  <div>
                    <h5 className="font-medium mb-3 text-white">Scope & Limits</h5>
                    <ul className="space-y-1 text-sm text-muted-foreground text-gray-400">
                      <li>• Tests performed only in an isolated lab environment, for educational and portfolio purposes.</li>
                    </ul>
                  </div>

                  <div>
                    <h5 className="font-medium mb-3 text-white">Recommended Controls</h5>
                    <ul className="space-y-1 text-sm text-muted-foreground text-gray-400">
                      <li>• Remove or update vsFTPd 2.3.4; disable anonymous FTP.</li>
                      <li>• Migrate to SFTP/SSH, harden configuration and filter port 21/tcp.</li>
                      <li>• Schedule regular scans (Nmap/OpenVAS) and monitoring of attempts (SIEM/IDS).</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

             <div>
              <h4 className="font-semibold text-white mb-3">Project Evidence</h4>

              <div className="grid md:grid-cols-2 gap-4">
                {p.images.map((src, idx) => (
                  <div key={src} className="space-y-2">
                    <Image
                      src={src}
                      alt={`Evidence ${idx + 1}`}
                      width={800}
                      height={480}
                      className="w-full rounded-lg border"
                    />
                    <p className="text-sm text-gray-400">Evidence {idx + 1}</p>
                  </div>
                ))}
              </div>
            </div>
          </CardContent>
        </Card>
      </section>
    </div>
  );
}
